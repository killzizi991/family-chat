<!DOCTYPE html>
<html>
<head>
    <title>FamilyChat v0.1</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' ws:; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; connect-src 'self' ws:;">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="fc_loginForm">
        <h2>–í—Ö–æ–¥</h2>
        <form>
            <label for="fc_loginUsername">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
            <input type="text" id="fc_loginUsername" required>
            
            <label for="fc_loginCode">–ö–æ–¥ –¥–æ—Å—Ç—É–ø–∞:</label>
            <input type="text" id="fc_loginCode" required>
            
            <button type="submit">–í–æ–π—Ç–∏</button>
        </form>
        <p>–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" id="fc_registerLink">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a></p>
    </div>
    
    <div id="fc_registerForm" style="display:none">
        <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
        <form>
            <label for="fc_registerUsername">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
            <input type="text" id="fc_registerUsername" required>
            
            <label for="fc_registerCode">–ö–æ–¥ –¥–æ—Å—Ç—É–ø–∞ (5 —Ü–∏—Ñ—Ä):</label>
            <input type="text" id="fc_registerCode" required>
            
            <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
        </form>
        <p><a href="#" id="fc_backToLogin">–ù–∞–∑–∞–¥ –∫ –≤—Ö–æ–¥—É</a></p>
    </div>
    
    <div id="fc_chatContainer" style="display:none">
        <div id="fc_sidebar" class="active">
            <div id="fc_sidebarHeader">
                <h3>–ß–∞—Ç—ã</h3>
                <span id="fc_collapseSidebar" class="collapse-icon">‚Üê</span>
            </div>
            <div id="fc_chatsContainer">
                <!-- –ß–∞—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>
        
        <div id="fc_mainChat">
            <div id="fc_chatHeader">
                <button id="fc_menuToggle">‚ò∞</button>
                <span id="fc_chatTitle">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç</span>
                <span>–í—ã –≤–æ—à–ª–∏ –∫–∞–∫: <span id="fc_currentUser"></span></span>
                <button id="fc_logoutButton">–í—ã–π—Ç–∏</button>
            </div>
            
            <div id="fc_messages">
                <div class="system-msg">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å –∫–æ—Ç–æ—Ä—ã–º —Ö–æ—Ç–∏—Ç–µ –ø–æ–æ–±—â–∞—Ç—å—Å—è</div>
            </div>
            
            <div id="fc_inputArea">
                <input type="text" id="fc_messageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ">
                <button id="fc_sendButton">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ –∑–≤–æ–Ω–∫–æ–≤ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ª–∏—á–Ω—ã—Ö —á–∞—Ç–æ–≤) -->
            <div id="fc_callButtons" style="display: none; text-align: center; padding: 10px; background: #f0f0f0; border-top: 1px solid #ddd;">
                <button id="fc_voiceCallButton" style="margin: 0 5px; padding: 8px 15px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;">
                    üìû –ì–æ–ª–æ—Å–æ–≤–æ–π –∑–≤–æ–Ω–æ–∫
                </button>
                <button id="fc_videoCallButton" style="margin: 0 5px; padding: 8px 15px; background: #17a2b8; color: white; border: none; border-radius: 4px; cursor: pointer;">
                    üìπ –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫
                </button>
                <button id="fc_endCallButton" style="margin: 0 5px; padding: 8px 15px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer; display: none;">
                    üìû –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–≤–æ–Ω–æ–∫
                </button>
            </div>

            <!-- –≠–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∏–¥–µ–æ -->
            <div id="fc_videoContainer" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80%; max-width: 600px; background: #000; z-index: 2000; padding: 10px; border-radius: 8px;">
                <div style="display: flex; flex-wrap: wrap; justify-content: center;">
                    <video id="fc_localVideo" autoplay muted style="width: 45%; margin: 5px; border: 2px solid #fff; border-radius: 4px;"></video>
                    <video id="fc_remoteVideo" autoplay style="width: 45%; margin: 5px; border: 2px solid #fff; border-radius: 4px;"></video>
                </div>
                <div style="text-align: center; margin-top: 10px;">
                    <button id="fc_closeVideo" style="padding: 8px 15px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer;">
                        –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                </div>
            </div>

            <!-- –û–≤–µ—Ä–ª–µ–π –¥–ª—è –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–≤–æ–Ω–∫–∞ -->
            <div id="fc_incomingCall" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.3); z-index: 2000;">
                <h3>–í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫ –æ—Ç <span id="fc_callerName"></span></h3>
                <div style="display: flex; justify-content: center; gap: 10px; margin-top: 20px;">
                    <button id="fc_acceptCall" style="padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;">
                        –ü—Ä–∏–Ω—è—Ç—å
                    </button>
                    <button id="fc_rejectCall" style="padding: 10px 20px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer;">
                        –û—Ç–∫–ª–æ–Ω–∏—Ç—å
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="fc_core.js"></script>
    <script src="fc_ui.js"></script>
    <script src="fc_webrtc.js"></script>
</body>
</html>